@using Radzen.Blazor
@using Tuat.Dialogs
@using Tuat.Interfaces
@using Tuat.Models
@inherits ResultDialogBase<string?>


<ScriptEditor @ref="scriptEditor"
			  ScriptEditorType="@ScriptEditorType"
			  Script="@Script"
			  ScriptEngine="@ScriptEngine"
			  Automation="@Automation"
			  IncludePreStartScript="@IncludePreStartScript"
			  Height="50vh" />
<RadzenButton Click="@(async () => Close(await scriptEditor!.GetScriptAsync()))"
			  Text="OK" />



@code {
	protected override bool ShowClose => true;
	protected override bool IsPersistent => false;
	protected override bool CloseDialogOnOverlayClick => true;
	protected override int? WidthInPixels => 1400;

	[Parameter]
	public Type? ScriptEditorType { get; set; }

	[Parameter]
	public string? Script { get; set; }

	[Parameter]
	public IScriptEngine? ScriptEngine { get; set; }

	[Parameter]
	public Automation? Automation { get; set; }

	[Parameter]
	public bool IncludePreStartScript { get; set; } = true;


	ScriptEditor? scriptEditor;
}
